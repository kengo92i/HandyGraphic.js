!function(t){"use strict";var n=t.document,i=i||{},o=function(){for(var n in i)"globalize"!=n&&(t[n]=i[n])},e=function(t,n){return t.getHeight()-n},r=function(t,i,o){o=o||"canvas",this.canvas=n.getElementById(o),this.canvas.width=t,this.canvas.height=i,this.ctx=this.canvas.getContext("2d")};r.prototype.getWidth=function(){return this.canvas.width},r.prototype.getHeight=function(){return this.canvas.height},r.prototype.getContext2d=function(){return this.ctx};var a=function(){this.win=null};a.prototype.test=function(){console.log("execute Graphic.test()")},a.prototype.Open=function(t,n,o){return 0>t||0>n?null:(this.win=new i.Window(t,n,o),this.win)},a.prototype.SetWidth=function(t){this.WSetWidth(this.win,t)},a.prototype.SetColor=function(t){this.WSetColor(this.win,t)},a.prototype.SetFillColor=function(t){this.WSetFillColor(this.win,t)},a.prototype.Line=function(t,n,i,o){this.WLine(this.win,t,n,i,o)},a.prototype.Circle=function(t,n,i){this.WCircle(this.win,t,n,i)},a.prototype.CircleFill=function(t,n,i,o){this.WCircleFill(this.win,t,n,i,o)},a.prototype.Box=function(t,n,i,o){this.WBox(this.win,t,n,i,o)},a.prototype.BoxFill=function(t,n,i,o,e){this.WBoxFill(this.win,t,n,i,o,e)},a.prototype.Polygon=function(t,n,i){this.WPolygon(this.win,t,n,i)},a.prototype.PolygonFill=function(t,n,i,o){this.WPolygonFill(this.win,t,n,i,o)},a.prototype.Arc=function(t,n,i,o,e){this.WArc(this.win,t,n,i,o,e)},a.prototype.Fan=function(t,n,i,o,e){this.WFan(this.win,t,n,i,o,e)},a.prototype.FanFill=function(t,n,i,o,e,r){this.WFanFill(this.win,t,n,i,o,e,r)},a.prototype.Text=function(t,n,i){this.WText(this.win,t,n,i)},a.prototype.SetFont=function(t,n){this.WSetFont(this.win,t,n)},a.prototype.Clear=function(){this.WClear(this.win)},a.prototype.WOpen=function(t,n,o){return 0>t||0>n?null:new i.Window(t,n,o)},a.prototype.WSetWidth=function(t,n){t.ctx.lineWidth=n},a.prototype.WSetColor=function(t,n){t.ctx.strokeStyle=n},a.prototype.WSetFillColor=function(t,n){t.ctx.fillStyle=n},a.prototype.WLine=function(t,n,i,o,r){i=e(t,i),r=e(t,r);var a=t.getContext2d();a.beginPath(),a.moveTo(n,i),a.lineTo(o,r),a.stroke()},a.prototype.WCircle=function(t,n,i,o){i=e(t,i);var r=t.getContext2d();r.beginPath(),r.arc(n,i,o,0,2*Math.PI),r.stroke()},a.prototype.WCircleFill=function(t,n,i,o,r){r=r||0,i=e(t,i);var a=t.getContext2d();a.beginPath(),a.arc(n,i,o,0,2*Math.PI),a.fill(),0!=r&&(a.closePath(),a.stroke())},a.prototype.WBox=function(t,n,i,o,r){i=e(t,i);var a=t.getContext2d();a.beginPath(),a.strokeRect(n,i-r,o,r)},a.prototype.WBoxFill=function(t,n,i,o,r,a){a=a||0,i=e(t,i);var l=t.getContext2d();l.beginPath(),l.fillRect(n,i-r,o,r),0!=a&&l.strokeRect(n,i-r,o,r)},a.prototype.WPolygon=function(t,n,i,o){var r=t.getContext2d();r.beginPath(),r.moveTo(i[0],e(t,o[0]));for(var a=1;n>a;++a)r.lineTo(i[a],e(t,o[a]));r.closePath(),r.stroke()},a.prototype.WPolygonFill=function(t,n,i,o,r){r=r||0;var a=t.getContext2d();a.beginPath(),a.moveTo(i[0],e(t,o[0]));for(var l=1;n>l;++l)a.lineTo(i[l],e(t,o[l]));if(a.closePath(),a.fill(),0!=r){a.beginPath(),a.moveTo(i[0],e(t,o[0]));for(var l=1;n>l;++l)a.lineTo(i[l],e(t,o[l]));a.closePath(),a.stroke()}},a.prototype.WArc=function(t,n,i,o,r,a){i=e(t,i);var l=t.getContext2d();l.beginPath(),l.arc(n,i,o,r*Math.PI/180,a*Math.PI/180,!0),l.stroke()},a.prototype.WFan=function(t,n,i,o,r,a){i=e(t,i);var l=t.getContext2d();l.beginPath(),l.arc(n,i,o,r*Math.PI/180,a*Math.PI/180,!0),l.lineTo(n,i),l.closePath(),l.stroke()},a.prototype.WFanFill=function(t,n,i,o,r,a,l){l=l||0,i=e(t,i);var c=t.getContext2d();c.beginPath(),c.arc(n,i,o,r*Math.PI/180,a*Math.PI/180,!0),c.lineTo(n,i),c.closePath(),c.fill(),0!=l&&(c.beginPath(),c.arc(n,i,o,r*Math.PI/180,a*Math.PI/180,!0),c.lineTo(n,i),c.closePath(),c.stroke())},a.prototype.WText=function(t,n,i,o){i=e(t,i);var r=t.getContext2d();r.fillText(o,n,i)},a.prototype.WSetFont=function(t,n,i){var o=String(i)+"px '"+n+"'",e=t.ctx;e.font=o},a.prototype.WClear=function(t){var n=t.getContext2d();n.beginPath(),n.clearRect(0,0,t.getWidth(),t.getHeight())},a.prototype.Gray=function(t){return 0>t||t>255?null:"rgb("+t+","+t+","+t+")"},a.prototype.GrayA=function(t,n){return 0>t||t>255?null:0>n||n>1?null:"rgba("+t+","+t+","+t+","+n+")"},a.prototype.RGB=function(t,n,i){return 0>t||t>255?null:0>n||n>255?null:0>i||i>255?null:"rgb("+t+","+n+","+i+")"},a.prototype.RGBA=function(t,n,i,o){return 0>t||t>255?null:0>n||n>255?null:0>i||i>255?null:0>o||o>1?null:"rgba("+t+","+n+","+i+","+o+")"};var l=function(){};t.requestAnimationFrame=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(n){t.setTimeout(n,1e3/60)}}(),t.cancelAnimationFrame=function(){return window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||function(t){window.clearTimeout(t)}}();var c=function(t){"undefined"!=typeof t&&this.initialize(t)};c.prototype.initialize=function(t){var n=this;Object.keys(t).forEach(function(t){this[t];Object.defineProperty(n,t,{value:this[t],writable:!0,enumerable:!0,configurable:!0})},t)},c.prototype.awake=function(){},c.prototype.update=function(){},c.prototype.draw=function(){},c.prototype.render=function(){this.update(),this.draw(),this._animationId=requestAnimationFrame(this.render.bind(this)),this._running||cancelAnimationFrame(this._animationId)},c.prototype.start=function(){this._running=!0,this.awake(),this.render()},c.prototype.exit=function(){this._running=!1},c.prototype.nextScene=function(t){this.exit(),t.start()};var h=function(t,n,i){this.name=t||"",this.painter=n||void 0,this.behaviors=i||[],this.x=0,this.y=0,this.width=10,this.height=10,this.velocityX=0,this.velocityY=0,this.visible=!0,this.animating=!1};return h.prototype.paint=function(t){void 0!==this.painter&&this.visible&&this.painter.paint(this,t)},h.prototype.update=function(t,n){for(var i=0;i<this.behaviors.length;++i)this.behaviors[i].execute(this,t,n)},i={Window:r,Graphic:a,Scene:c,Sprite:h,Util:l,globalize:o},t.handyGraphic=i,i}(window);